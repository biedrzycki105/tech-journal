# Lab 7.1   Exploiting Pippin

### Summary

### Lab

#### Active Recon and Service Enumeration

* Conduct Active Reconnaissance against pippin. Answer the following.

**Deliverable 1**

* Provide screenshots of open ports, their services and versions.
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/2610f49b-fc59-4a63-8aa9-f496d6c4f85b)

**Deliverable 2**

* Provide screenshots of the services as they respond to client applications like web browsers and command line clients.
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/e511112c-bcbc-403e-9e8f-23c06f20dec6)
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/565a9fd3-5b0c-4c24-9fda-28d80ad58e58)
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/24f3dc8e-c7da-40d9-bf82-1a58aec0e5a1)

**Deliverable 3**

* Have you found any of the services particularly interesting? Please explain using annotated screenshots and brief captions or descriptions.
  * The FTP service is interesting because Pippin is allowing people to access directories named `cache`, `docs`, `extensions`, and `images`. When logging into the FTP server, there is a folder called `upload` that allows all users to read, write, and execute. The write permission allows anyone to upload any file.
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/f139fe3d-7329-421d-8f03-e6d15eb41d01)

#### Remote Code Execution

* One of the services had been configured by a grossly incompetent systems administrator. If you are persistent, you should be able to create your own files on the remote host.

**Deliverable 4**

* Upload a test file (give it a distinctive Safe for Work name) and provide proof that you've done so in the form of screenshots of commands and output.
* ```
  cd <path-to-upload-file>
  ftp 10.0.5.25
  # Login is "anonymous" with no password because it is...well...anonymous login only
  cd upload
  put <file>
  ```
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/3d3d83ea-d828-4e12-b91d-e6c298aba11f)

**Deliverable 5**

* Provide evidence of remote code execution such that you can output the systems /etc/passwd file. How did you do this? Are there any accounts of interest? (At this point you should at least have the privileges of the attacked service)
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/c33878ad-2c68-4059-b976-7c5b11365a48)
* Copied the backdoor template at /usr/share/webshells/php/simple-backdoor.php to \~/ETHHACK/files/backdoor/erik-backdoor.php
* Uploaded erik-backdoor.php to FTP server
* Navigate to `http://10.0.5.25/upload/erik-backdoor.php?cmd=cat+/etc/passwd`

#### Loot

* By leveraging a permissions issue in a misconfigured service, you should be able to find sensitive data if you look hard.

**Deliverable 6**

* What did you find and how did you find it? Can you leverage this data to your advantage?
  * ![image](https://github.com/biedrzycki105/tech-journal/assets/90063737/dcb90091-da5d-4f1d-80a7-d4841dcf8929)

**Deliverable 7**

* You should be able to get into pippin as an authorized user. Provide a screenshot showing your session and cat the user-flag.

**Challenge: can you use your malicious upload to provide a reverse shell to your kali system running in the context of the apache user?**

#### Elevation

Now, the web server has an application, and that application stores its data in yet another service that you likely did not see during your active reconnaissance. Leverage some of the secret data you've found to interact with this internal service to see if there is any other information about users that you might be able to use?

**Deliverable 8**

* Enumerate this internal data source to determine where and in what fields useful data might exist. You very likely learned about this system in SYS255,265 and SEC260. Break out your old notes and get on with it. Describe what you found. In the end, you are looking for a new identity and a credential.

\####Deliverable 9

* The credentials you've found are not terribly useful by themselves, you will need to use advanced hash cracking techniques to get what you need. There are very few references on how to get this done, but the following [link](https://forum.hashkiller.io/index.php?threads/25-reward-need-help-in-formatting-modifying-mediawiki-pbkdf2-sha512-hashes.32787/) might push you in the right direction.
  * The crack is not trivial and will likely take a couple hours once you figure it out
  * Tip: the password starts with a lowercase 'p'.
  * It is also in rockyou
* Provide a screenshot of your tool of choice cracking the password.
